<div class="container my-5">
  <div class="card shadow-sm">
    <div class="card-body">
      <h3 class="card-title"><%= @post.title %></h3>

      <p class="text-muted">
        <%= @post.user&.display_name || "退会済みユーザー" %> さん
        | <%= l @post.created_at, format: :long %>
      </p>

      <% if @post.image.attached? %>
        <div class="mb-3">
          <%= image_tag @post.image.variant(resize_to_limit: [600, 400]),class: "img-fluid rounded shadow" %>
        </div>
      <% end %>

      <p><%= simple_format(@post.body) %></p>

      <div id="like-btn-<%= @post.id %>">
        <%= render "public/likes/like_button", post: @post %>
      </div>

      <% if current_user == @post.user %>
        <div class="mt-3 d-flex gap-2">
          <%= link_to "編集", edit_post_path(@post), class: "btn btn-primary" %>
          <%= link_to "削除", post_path(@post), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn btn-danger" %>
        </div>
      <% end %>

      <div class="mt-5">
        <%= render "public/comments/comments", post: @post %>
      </div>

      <%= link_to "一覧に戻る", posts_path, class: "btn btn-outline-secondary mt-3" %>
    </div>
  </div>
</div>