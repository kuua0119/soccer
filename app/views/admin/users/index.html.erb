<div class="title-bg text-white d-inline-block px-3 py-2 rounded">
  <h2 class="m-0">ユーザー一覧</h2>
</div>

<table class="table align-middle">
  <thead>
    <tr>
      <th>ID</th>
      <th>名前</th>
      <th>Email</th>
      <th>ステータス</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.id %></td>
        <td><%= link_to(user.name.presence || "退会済みユーザー", admin_user_path(user)) %></td>
        <td><%= user.email %></td>
        <td>
          <% if user.is_banned? %>
            <span class="badge bg-warning text-dark">凍結中</span>
          <% else %>
            <span class="badge bg-success">有効</span>
          <% end %>
        </td>
        <td class="d-flex gap-1">
          <% if user.is_banned? %>
            <%= button_to "凍結解除", unban_admin_user_path(user), method: :patch, class: "btn btn-success btn-sm" %>
          <% else %>
            <%= button_to "凍結", ban_admin_user_path(user), method: :patch, data: { confirm: "このユーザーを凍結しますか？" }, class: "btn btn-warning btn-sm" %>
          <% end %>

          <%= link_to "削除", admin_user_path(user), method: :delete, data: { confirm: "本当にこのユーザーを削除しますか？ 投稿・コメントは残ります。" }, class: "btn btn-danger btn-sm" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>